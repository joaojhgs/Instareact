{"ast":null,"code":"import { List } from 'immutable';\nexport function timeline() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new List();\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === 'LISTAGEM') {\n    return new List(action.fotos);\n  }\n\n  if (action.type === 'COMENTARIO') {\n    const fotoAchada = state.find(foto => foto.id === action.fotoId);\n    fotoAchada.comentarios.push(action.novoComentario);\n    return state;\n  }\n\n  if (action.type === 'LIKE') {\n    const fotoAchada = state.find(foto => foto.id === action.fotoId);\n    fotoAchada.likeada = !fotoAchada.likeada;\n    const liker = action.liker;\n    const possivelLiker = fotoAchada.likers.find(likerAtual => likerAtual.login === liker.login);\n\n    if (possivelLiker === undefined) {\n      fotoAchada.likers.push(liker);\n    } else {\n      const novosLikers = fotoAchada.likers.filter(likerAtual => likerAtual.login !== liker.login);\n      fotoAchada.likers = novosLikers;\n    }\n\n    return state;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/joaohgs/Documents/ProjetosReact/instalura/src/reducers/timeline.js"],"names":["List","timeline","state","action","type","fotos","fotoAchada","find","foto","id","fotoId","comentarios","push","novoComentario","likeada","liker","possivelLiker","likers","likerAtual","login","undefined","novosLikers","filter"],"mappings":"AAAA,SAAQA,IAAR,QAAmB,WAAnB;AAEA,OAAO,SAASC,QAAT,GAA0C;AAAA,MAAxBC,KAAwB,uEAAlB,IAAIF,IAAJ,EAAkB;AAAA,MAAPG,MAAO;;AAC7C,MAAGA,MAAM,CAACC,IAAP,KAAgB,UAAnB,EAA8B;AAC5B,WAAO,IAAIJ,IAAJ,CAASG,MAAM,CAACE,KAAhB,CAAP;AACD;;AAED,MAAGF,MAAM,CAACC,IAAP,KAAgB,YAAnB,EAAgC;AAC5B,UAAME,UAAU,GAAGJ,KAAK,CAACK,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,MAAtC,CAAnB;AACAJ,IAAAA,UAAU,CAACK,WAAX,CAAuBC,IAAvB,CAA4BT,MAAM,CAACU,cAAnC;AAEA,WAAOX,KAAP;AACH;;AAED,MAAGC,MAAM,CAACC,IAAP,KAAgB,MAAnB,EAA0B;AACpB,UAAME,UAAU,GAAGJ,KAAK,CAACK,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,MAAtC,CAAnB;AACAJ,IAAAA,UAAU,CAACQ,OAAX,GAAqB,CAACR,UAAU,CAACQ,OAAjC;AAEA,UAAMC,KAAK,GAAGZ,MAAM,CAACY,KAArB;AACA,UAAMC,aAAa,GAAGV,UAAU,CAACW,MAAX,CAAkBV,IAAlB,CAAuBW,UAAU,IAAIA,UAAU,CAACC,KAAX,KAAqBJ,KAAK,CAACI,KAAhE,CAAtB;;AAEA,QAAGH,aAAa,KAAKI,SAArB,EAA+B;AAC3Bd,MAAAA,UAAU,CAACW,MAAX,CAAkBL,IAAlB,CAAuBG,KAAvB;AACH,KAFD,MAEO;AACH,YAAMM,WAAW,GAAGf,UAAU,CAACW,MAAX,CAAkBK,MAAlB,CAAyBJ,UAAU,IAAIA,UAAU,CAACC,KAAX,KAAqBJ,KAAK,CAACI,KAAlE,CAApB;AACAb,MAAAA,UAAU,CAACW,MAAX,GAAoBI,WAApB;AACH;;AAED,WAAOnB,KAAP;AACL;;AAED,SAAOA,KAAP;AACD","sourcesContent":["import {List} from 'immutable';\n\nexport function timeline(state=new List(),action){\n    if(action.type === 'LISTAGEM'){  \n      return new List(action.fotos);\n    }\n  \n    if(action.type === 'COMENTARIO'){\n        const fotoAchada = state.find(foto => foto.id === action.fotoId);        \n        fotoAchada.comentarios.push(action.novoComentario); \n  \n        return state;\n    }\n  \n    if(action.type === 'LIKE'){\n          const fotoAchada = state.find(foto => foto.id === action.fotoId);\n          fotoAchada.likeada = !fotoAchada.likeada;\n          \n          const liker = action.liker;\n          const possivelLiker = fotoAchada.likers.find(likerAtual => likerAtual.login === liker.login);\n  \n          if(possivelLiker === undefined){\n              fotoAchada.likers.push(liker);\n          } else {\n              const novosLikers = fotoAchada.likers.filter(likerAtual => likerAtual.login !== liker.login);\n              fotoAchada.likers = novosLikers;\n          }\n  \n          return state;\n    }\n  \n    return state;\n  }"]},"metadata":{},"sourceType":"module"}