{"ast":null,"code":"export default class TimelineApi {\n  static lista(urlPerfil) {\n    return dispatch => {\n      fetch(urlPerfil).then(response => response.json()).then(fotos => {\n        dispatch({\n          type: 'LISTAGEM',\n          fotos\n        });\n        return fotos;\n      });\n    };\n  }\n\n  static comenta(fotoId, textoComentario) {\n    return dispatch => {\n      const requestInfo = {\n        method: 'POST',\n        body: JSON.stringify({\n          texto: textoComentario\n        }),\n        headers: new Headers({\n          'Content-type': 'application/json'\n        })\n      };\n      fetch(`https://instalura-api.herokuapp.com/api/fotos/${fotoId}/comment?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`, requestInfo).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error(\"não foi possível comentar\");\n        }\n      }).then(novoComentario => {\n        dispatch({\n          type: 'COMENTARIO',\n          fotoId,\n          novoComentario\n        });\n        return novoComentario;\n      });\n    };\n  }\n\n  static like(fotoId) {\n    return dispatch => {\n      fetch(`https://instalura-api.herokuapp.com/api/fotos/${fotoId}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`, {\n        method: 'POST'\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error(\"não foi possível realizar o like da foto\");\n        }\n      }).then(liker => {\n        dispatch({\n          type: 'LIKE',\n          fotoId,\n          liker\n        });\n        return liker;\n      });\n    };\n  }\n\n}","map":{"version":3,"sources":["/home/joaohgs/Documents/ProjetosReact/instalura/src/logicas/TimelineApi.js"],"names":["TimelineApi","lista","urlPerfil","dispatch","fetch","then","response","json","fotos","type","comenta","fotoId","textoComentario","requestInfo","method","body","JSON","stringify","texto","headers","Headers","localStorage","getItem","ok","Error","novoComentario","like","liker"],"mappings":"AAAA,eAAe,MAAMA,WAAN,CAAkB;AACjB,SAALC,KAAK,CAACC,SAAD,EAAW;AACrB,WAAOC,QAAQ,IAAI;AACjBC,MAAAA,KAAK,CAACF,SAAD,CAAL,CACCG,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEMG,KAAK,IAAI;AACXL,QAAAA,QAAQ,CAAC;AAACM,UAAAA,IAAI,EAAC,UAAN;AAAiBD,UAAAA;AAAjB,SAAD,CAAR;AACA,eAAOA,KAAP;AACH,OALD;AAMD,KAPD;AAQD;;AAEa,SAAPE,OAAO,CAACC,MAAD,EAAQC,eAAR,EAAyB;AACrC,WAAOT,QAAQ,IAAI;AACjB,YAAMU,WAAW,GAAG;AAClBC,QAAAA,MAAM,EAAC,MADW;AAElBC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAACC,UAAAA,KAAK,EAACN;AAAP,SAAf,CAFa;AAGlBO,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,0BAAe;AADI,SAAZ;AAHS,OAApB;AAQAhB,MAAAA,KAAK,CAAE,iDAAgDO,MAAO,yBAAwBU,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmC,EAApH,EAAsHT,WAAtH,CAAL,CACGR,IADH,CACQC,QAAQ,IAAI;AAChB,YAAGA,QAAQ,CAACiB,EAAZ,EAAe;AACb,iBAAOjB,QAAQ,CAACC,IAAT,EAAP;AACD,SAFD,MAEO;AACL,gBAAM,IAAIiB,KAAJ,CAAU,2BAAV,CAAN;AACD;AACF,OAPH,EAQGnB,IARH,CAQQoB,cAAc,IAAI;AACpBtB,QAAAA,QAAQ,CAAC;AAACM,UAAAA,IAAI,EAAC,YAAN;AAAmBE,UAAAA,MAAnB;AAA0Bc,UAAAA;AAA1B,SAAD,CAAR;AACA,eAAOA,cAAP;AACH,OAXH;AAYD,KArBD;AAsBD;;AAEU,SAAJC,IAAI,CAACf,MAAD,EAAQ;AACjB,WAAOR,QAAQ,IAAI;AACjBC,MAAAA,KAAK,CAAE,iDAAgDO,MAAO,sBAAqBU,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmC,EAAjH,EAAmH;AAACR,QAAAA,MAAM,EAAC;AAAR,OAAnH,CAAL,CACGT,IADH,CACQC,QAAQ,IAAI;AAChB,YAAGA,QAAQ,CAACiB,EAAZ,EAAgB;AACd,iBAAOjB,QAAQ,CAACC,IAAT,EAAP;AACD,SAFD,MAEO;AACL,gBAAM,IAAIiB,KAAJ,CAAU,0CAAV,CAAN;AACD;AACF,OAPH,EAQGnB,IARH,CAQQsB,KAAK,IAAI;AACbxB,QAAAA,QAAQ,CAAC;AAACM,UAAAA,IAAI,EAAC,MAAN;AAAaE,UAAAA,MAAb;AAAoBgB,UAAAA;AAApB,SAAD,CAAR;AACA,eAAOA,KAAP;AACD,OAXH;AAYD,KAbD;AAcD;;AApD4B","sourcesContent":["export default class TimelineApi {\n    static lista(urlPerfil){\n      return dispatch => {\n        fetch(urlPerfil)\n        .then(response => response.json())\n        .then(fotos => {         \n            dispatch({type:'LISTAGEM',fotos});\n            return fotos;\n        });\n      }              \n    }\n\n    static comenta(fotoId,textoComentario) {\n      return dispatch => {\n        const requestInfo = {\n          method:'POST',\n          body:JSON.stringify({texto:textoComentario}),\n          headers: new Headers({\n            'Content-type':'application/json'\n          })\n        };\n\n        fetch(`https://instalura-api.herokuapp.com/api/fotos/${fotoId}/comment?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`,requestInfo)\n          .then(response => {\n            if(response.ok){\n              return response.json();\n            } else {\n              throw new Error(\"não foi possível comentar\");\n            }\n          })\n          .then(novoComentario => {\n              dispatch({type:'COMENTARIO',fotoId,novoComentario});            \n              return novoComentario;\n          }); \n      }     \n    }    \n\n    static like(fotoId){\n      return dispatch => {\n        fetch(`https://instalura-api.herokuapp.com/api/fotos/${fotoId}/like?X-AUTH-TOKEN=${localStorage.getItem('auth-token')}`,{method:'POST'})\n          .then(response => {\n            if(response.ok) {\n              return response.json();\n            } else {            \n              throw new Error(\"não foi possível realizar o like da foto\");\n            }\n          })\n          .then(liker => {          \n            dispatch({type:'LIKE',fotoId,liker});   \n            return liker;         \n          });             \n      } \n    }\n\n}"]},"metadata":{},"sourceType":"module"}