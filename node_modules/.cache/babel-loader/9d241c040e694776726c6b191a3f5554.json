{"ast":null,"code":"import { List } from 'immutable';\nexport function timeline() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new List();\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === 'LISTAGEM') {\n    return new List(action.fotos);\n  }\n\n  if (action.type === 'COMENTARIO') {\n    const fotoEstadoAtual = state.find(foto => foto.id === action.fotoId);\n    const novosComentarios = fotoEstadoAtual.comentarios.concat(action.novoComentario);\n    Object.assign({}, fotoEstadoAtual, {\n      comentarios: novosComentarios\n    });\n    return state;\n  }\n\n  if (action.type === 'LIKE') {\n    const fotoAchada = state.find(foto => foto.id === action.fotoId);\n    fotoAchada.likeada = !fotoAchada.likeada;\n    const liker = action.liker;\n    const possivelLiker = fotoAchada.likers.find(likerAtual => likerAtual.login === liker.login);\n\n    if (possivelLiker === undefined) {\n      fotoAchada.likers.push(liker);\n    } else {\n      const novosLikers = fotoAchada.likers.filter(likerAtual => likerAtual.login !== liker.login);\n      fotoAchada.likers = novosLikers;\n    }\n\n    return state;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/joaohgs/Documents/ProjetosReact/instalura/src/reducers/timeline.js"],"names":["List","timeline","state","action","type","fotos","fotoEstadoAtual","find","foto","id","fotoId","novosComentarios","comentarios","concat","novoComentario","Object","assign","fotoAchada","likeada","liker","possivelLiker","likers","likerAtual","login","undefined","push","novosLikers","filter"],"mappings":"AAAA,SAAQA,IAAR,QAAmB,WAAnB;AAEA,OAAO,SAASC,QAAT,GAA0C;AAAA,MAAxBC,KAAwB,uEAAlB,IAAIF,IAAJ,EAAkB;AAAA,MAAPG,MAAO;;AAC7C,MAAGA,MAAM,CAACC,IAAP,KAAgB,UAAnB,EAA8B;AAC5B,WAAO,IAAIJ,IAAJ,CAASG,MAAM,CAACE,KAAhB,CAAP;AACD;;AAED,MAAGF,MAAM,CAACC,IAAP,KAAgB,YAAnB,EAAgC;AAC5B,UAAME,eAAe,GAAGJ,KAAK,CAACK,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,MAAtC,CAAxB;AACA,UAAMC,gBAAgB,GAAGL,eAAe,CAACM,WAAhB,CAA4BC,MAA5B,CAAmCV,MAAM,CAACW,cAA1C,CAAzB;AACAC,IAAAA,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBV,eAAjB,EAAiC;AAACM,MAAAA,WAAW,EAACD;AAAb,KAAjC;AACA,WAAOT,KAAP;AACH;;AAED,MAAGC,MAAM,CAACC,IAAP,KAAgB,MAAnB,EAA0B;AACpB,UAAMa,UAAU,GAAGf,KAAK,CAACK,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,MAAtC,CAAnB;AACAO,IAAAA,UAAU,CAACC,OAAX,GAAqB,CAACD,UAAU,CAACC,OAAjC;AAEA,UAAMC,KAAK,GAAGhB,MAAM,CAACgB,KAArB;AACA,UAAMC,aAAa,GAAGH,UAAU,CAACI,MAAX,CAAkBd,IAAlB,CAAuBe,UAAU,IAAIA,UAAU,CAACC,KAAX,KAAqBJ,KAAK,CAACI,KAAhE,CAAtB;;AAEA,QAAGH,aAAa,KAAKI,SAArB,EAA+B;AAC3BP,MAAAA,UAAU,CAACI,MAAX,CAAkBI,IAAlB,CAAuBN,KAAvB;AACH,KAFD,MAEO;AACH,YAAMO,WAAW,GAAGT,UAAU,CAACI,MAAX,CAAkBM,MAAlB,CAAyBL,UAAU,IAAIA,UAAU,CAACC,KAAX,KAAqBJ,KAAK,CAACI,KAAlE,CAApB;AACAN,MAAAA,UAAU,CAACI,MAAX,GAAoBK,WAApB;AACH;;AAED,WAAOxB,KAAP;AACL;;AAED,SAAOA,KAAP;AACD","sourcesContent":["import {List} from 'immutable';\n\nexport function timeline(state=new List(),action){\n    if(action.type === 'LISTAGEM'){  \n      return new List(action.fotos);\n    }\n  \n    if(action.type === 'COMENTARIO'){\n        const fotoEstadoAtual = state.find(foto => foto.id === action.fotoId);        \n        const novosComentarios = fotoEstadoAtual.comentarios.concat(action.novoComentario); \n        Object.assign({},fotoEstadoAtual,{comentarios:novosComentarios});\n        return state;\n    }\n  \n    if(action.type === 'LIKE'){\n          const fotoAchada = state.find(foto => foto.id === action.fotoId);\n          fotoAchada.likeada = !fotoAchada.likeada;\n          \n          const liker = action.liker;\n          const possivelLiker = fotoAchada.likers.find(likerAtual => likerAtual.login === liker.login);\n  \n          if(possivelLiker === undefined){\n              fotoAchada.likers.push(liker);\n          } else {\n              const novosLikers = fotoAchada.likers.filter(likerAtual => likerAtual.login !== liker.login);\n              fotoAchada.likers = novosLikers;\n          }\n  \n          return state;\n    }\n  \n    return state;\n  }"]},"metadata":{},"sourceType":"module"}